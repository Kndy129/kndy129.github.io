<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulado de Cibersegurança - 80 Questões</title>
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <style>
    body {font-family: Arial, sans-serif; margin: 20px; background: #f5f7fa; color: #333;}
    h1, h2 {color: #004080;}
    .question {margin-bottom: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 8px; background: #fff; position: relative;}
    .options label {display: block; margin: 5px 0;}
    .feedback {margin-top: 10px; font-weight: bold;}
    .correct {color: green;}
    .incorrect {color: red;}
    .comment {margin-top: 5px; padding: 10px; border-left: 4px solid #004080; background: #eef5ff; display: none; transition: all 0.3s ease-in-out; opacity: 0;}
    .comment.show {display: block; opacity: 1;}
    button {margin: 5px; padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer;}
    button:hover {opacity: 0.9;}
    .btn-confirmar {background-color: #4CAF50; color: #fff;}
    .btn-corrigir-todas {background-color: #FF9800; color: #fff;}
    .btn-gabarito {background-color: #2196F3; color: #fff;}
    .btn-limpar {background-color: #f44336; color: #fff;}
    .btn-nav {background-color: #555; color: #fff;}
    #result, #result2, #result3 {margin-top: 20px; font-size: 1.2em; font-weight: bold;}
    .controls {margin-bottom: 12px; display: flex; gap: 10px; flex-wrap: wrap;}
    
    /* Estilos para a notificação +1 */
    .plusOne {
      position: absolute;
      right: 15px;
      top: 15px;
      color: green;
      font-weight: bold;
      font-size: 1.2em;
      opacity: 0;
      transition: all 0.5s ease-in-out;
      pointer-events: none;
      z-index: 10;
    }
    .plusOne.show {
      opacity: 1;
      animation: floatUp 1s ease-in-out forwards;
    }
    @keyframes floatUp {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-30px); opacity: 0; }
    }
    
    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .question-text {
      flex: 1;
    }
    .question-actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* Estilo para o placar global */
    #placarGlobal {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #004080;
      color: white;
      padding: 15px;
      border-radius: 8px;
      font-weight: bold;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
      z-index: 1000;
    }

    /* Estilo para o progresso geral */
    .progress-container {
      margin: 20px 0;
      background: #e0e0e0;
      border-radius: 10px;
      height: 20px;
    }
    .progress-bar {
      height: 100%;
      background: #4CAF50;
      border-radius: 10px;
      transition: width 0.5s;
    }
  </style>
</head>
<body>
  <div id="placarGlobal">Placar Total: 0/80</div>

  <h1>Simulado de Cibersegurança — 80 Questões</h1>
  <p>Responda as questões. Use "Confirmar Resposta" para verificar individualmente ou "Corrigir Todas" para ver todas as respostas de uma vez.</p>

  <!-- PÁGINA 1 -->
  <div id="page1">
    <h2>Parte 1 - Questões 1 a 30</h2>
    <div class="controls">
      <button class="btn-corrigir-todas" onclick="checkAllAnswers('quiz',questions)">Corrigir Todas (Página 1)</button>
      <button class="btn-gabarito" onclick="showAnswers('quiz',questions)">Mostrar Gabarito</button>
      <button class="btn-limpar" onclick="resetQuiz('quiz','result')">Limpar Respostas</button>
    </div>
    <div id="quiz"></div>
    <div id="result"></div>
    <button class="btn-nav" onclick="showPage(2)">Próxima Página</button>
  </div>

  <!-- PÁGINA 2 -->
  <div id="page2" style="display:none;">
    <h2>Parte 2 - Questões 31 a 60</h2>
    <div class="controls">
      <button class="btn-corrigir-todas" onclick="checkAllAnswers('quiz2',questions2)">Corrigir Todas (Página 2)</button>
      <button class="btn-gabarito" onclick="showAnswers('quiz2',questions2)">Mostrar Gabarito</button>
      <button class="btn-limpar" onclick="resetQuiz('quiz2','result2')">Limpar Respostas</button>
    </div>
    <div id="quiz2"></div>
    <div id="result2"></div>
    <button class="btn-nav" onclick="showPage(1)">Página Anterior</button>
    <button class="btn-nav" onclick="showPage(3)">Próxima Página</button>
  </div>

  <!-- PÁGINA 3 -->
  <div id="page3" style="display:none;">
    <h2>Parte 3 - Questões 61 a 80</h2>
    <div class="controls">
      <button class="btn-corrigir-todas" onclick="checkAllAnswers('quiz3',questions3)">Corrigir Todas (Página 3)</button>
      <button class="btn-gabarito" onclick="showAnswers('quiz3',questions3)">Mostrar Gabarito</button>
      <button class="btn-limpar" onclick="resetQuiz('quiz3','result3')">Limpar Respostas</button>
    </div>
    <div id="quiz3"></div>
    <div id="result3"></div>
    <button class="btn-nav" onclick="showPage(2)">Página Anterior</button>
  </div>

  <!-- BOTÃO PARA CORRIGIR TODAS AS PÁGINAS -->
  <div style="text-align: center; margin-top: 30px;">
    <button class="btn-corrigir-todas" onclick="checkAllPages()" style="background-color: #9C27B0; font-size: 1.1em; padding: 12px 20px;">
      Corrigir Todas as Questões (Páginas 1, 2 e 3)
    </button>
  </div>

  <script>
    // Variável global para controlar o placar
    let placarTotal = parseInt(localStorage.getItem("placarTotal")) || 0;

    // Atualizar placar global
    function updateGlobalPlacar() {
      document.getElementById("placarGlobal").innerText = `Placar Total: ${placarTotal}/80`;
    }

    // Renderização dinâmica + armazenamento local
    function renderQuiz(containerId, questions, storageKey, startNumber) {
      const quizContainer = document.getElementById(containerId);
      const saved = JSON.parse(localStorage.getItem(storageKey)) || {};
      const corrected = JSON.parse(localStorage.getItem(storageKey + '_corrected')) || {};
      quizContainer.innerHTML = "";

      questions.forEach((q, i) => {
        const div = document.createElement("div");
        div.className = "question";

        let html = `
          <div class="question-header">
            <div class="question-text">
              <p><strong>Questão ${startNumber + i}</strong> - ${q.q}</p>
            </div>
            <div class="question-actions">
              <button class="btn-confirmar" onclick="checkSingleAnswer('${containerId}', ${i}, ${storageKey === 'quiz' ? 'questions' : storageKey === 'quiz2' ? 'questions2' : 'questions3'})">Confirmar Resposta</button>
              <span id="${containerId}_plus${i}" class="plusOne">+1</span>
            </div>
          </div>
          <div class="options">`;

        q.options.forEach((opt, j) => {
          const checked = saved[i] == j ? "checked" : "";
          html += `
            <label>
              <input type="radio" name="${containerId}_q${i}" value="${j}" ${checked}
                onchange="saveAnswer('${storageKey}', ${i}, ${j})">
              ${opt}
            </label>`;
        });

        html += `</div>
                 <div id="${containerId}_feedback${i}" class="feedback"></div>
                 <div id="${containerId}_comment${i}" class="comment"></div>`;
        
        div.innerHTML = html;
        quizContainer.appendChild(div);

        // Mostrar feedback se já foi corrigido anteriormente
        if (corrected[i]) {
          const feedback = document.getElementById(`${containerId}_feedback${i}`);
          const comment = document.getElementById(`${containerId}_comment${i}`);
          if (saved[i] == q.answer) {
            feedback.innerHTML = "✔ Resposta correta!";
            feedback.className = "feedback correct";
          } else {
            feedback.innerHTML = "✘ Resposta incorreta!";
            feedback.className = "feedback incorrect";
          }
          comment.innerHTML = q.comment;
          comment.classList.add("show");
        }
      });

      updateResult(containerId, questions);
    }

    function saveAnswer(storageKey, qIndex, optionIndex) {
      let answers = JSON.parse(localStorage.getItem(storageKey)) || {};
      answers[qIndex] = optionIndex;
      localStorage.setItem(storageKey, JSON.stringify(answers));
    }

    function checkSingleAnswer(containerId, index, questionsArray) {
      const saved = JSON.parse(localStorage.getItem(containerId)) || {};
      const corrected = JSON.parse(localStorage.getItem(containerId + '_corrected')) || {};
      const q = questionsArray[index];
      const feedback = document.getElementById(`${containerId}_feedback${index}`);
      const comment = document.getElementById(`${containerId}_comment${index}`);
      const plusOne = document.getElementById(`${containerId}_plus${index}`);

      // Verificar se já foi respondida
      if (saved[index] === undefined) {
        feedback.innerHTML = "Por favor, selecione uma resposta antes de confirmar.";
        feedback.className = "feedback incorrect";
        comment.classList.remove("show");
        return;
      }

      // Verificar se já foi corrigida
      if (corrected[index]) {
        feedback.innerHTML = "Esta questão já foi confirmada anteriormente.";
        feedback.className = "feedback incorrect";
        return;
      }

      if (saved[index] == q.answer) {
        feedback.innerHTML = "✔ Resposta correta!";
        feedback.className = "feedback correct";
        
        // Mostrar notificação +1
        plusOne.classList.add("show");
        setTimeout(() => {
          plusOne.classList.remove("show");
        }, 1000);

        // Atualizar placar
        placarTotal++;
        localStorage.setItem("placarTotal", placarTotal);
        updateGlobalPlacar();
      } else {
        feedback.innerHTML = "✘ Resposta incorreta!";
        feedback.className = "feedback incorrect";
      }

      // Marcar como corrigida
      corrected[index] = true;
      localStorage.setItem(containerId + '_corrected', JSON.stringify(corrected));

      comment.innerHTML = q.comment;
      comment.classList.add("show");

      updateResult(containerId, questionsArray);
    }

    function checkAllAnswers(containerId, questionsArray) {
      const saved = JSON.parse(localStorage.getItem(containerId)) || {};
      const corrected = JSON.parse(localStorage.getItem(containerId + '_corrected')) || {};
      let newPoints = 0;

      questionsArray.forEach((q, i) => {
        const feedback = document.getElementById(`${containerId}_feedback${i}`);
        const comment = document.getElementById(`${containerId}_comment${i}`);
        const plusOne = document.getElementById(`${containerId}_plus${i}`);

        // Só processa se foi respondida e ainda não foi corrigida
        if (saved[i] !== undefined && !corrected[i]) {
          if (saved[i] == q.answer) {
            feedback.innerHTML = " ✅ Resposta correta!";
            feedback.className = "feedback correct";
            
            // Mostrar notificação +1
            plusOne.classList.add("show");
            setTimeout(() => {
              plusOne.classList.remove("show");
            }, 1000);

            newPoints++;
          } else {
            feedback.innerHTML = "✘ Resposta incorreta!";
            feedback.className = "feedback incorrect";
          }

          // Marcar como corrigida
          corrected[i] = true;
          comment.innerHTML = q.comment;
          comment.classList.add("show");
        } else if (saved[i] === undefined) {
          feedback.innerHTML = "✘ Questão não respondida";
          feedback.className = "feedback incorrect";
        }
      });

      // Atualizar placar
      if (newPoints > 0) {
        placarTotal += newPoints;
        localStorage.setItem("placarTotal", placarTotal);
        updateGlobalPlacar();
      }

      localStorage.setItem(containerId + '_corrected', JSON.stringify(corrected));
      updateResult(containerId, questionsArray);
    }

    function checkAllPages() {
      // Corrigir página 1
      showPage(1);
      setTimeout(() => {
        checkAllAnswers('quiz', questions);
        
        // Corrigir página 2
        setTimeout(() => {
          showPage(2);
          checkAllAnswers('quiz2', questions2);
          
          // Corrigir página 3
          setTimeout(() => {
            showPage(3);
            checkAllAnswers('quiz3', questions3);
            
            // Voltar para página 1
            setTimeout(() => {
              showPage(1);
              alert(`Todas as questões foram corrigidas! Seu placar total é: ${placarTotal}/80`);
            }, 500);
          }, 500);
        }, 500);
      }, 500);
    }

    function updateResult(containerId, questions) {
      const resultId = containerId === 'quiz' ? 'result' : containerId === 'quiz2' ? 'result2' : 'result3';
      const saved = JSON.parse(localStorage.getItem(containerId)) || {};
      const corrected = JSON.parse(localStorage.getItem(containerId + '_corrected')) || {};
      
      let correct = 0;
      let answered = 0;

      questions.forEach((q, i) => {
        if (corrected[i] && saved[i] == q.answer) {
          correct++;
        }
        if (saved[i] !== undefined) {
          answered++;
        }
      });

      document.getElementById(resultId).innerHTML = 
        `Progresso: ${answered}/${questions.length} questões respondidas | ` +
        `Acertos: ${correct}/${questions.length}`;
    }

    function showAnswers(containerId, questions) {
      const corrected = JSON.parse(localStorage.getItem(containerId + '_corrected')) || {};
      
      questions.forEach((q, i) => {
        const feedback = document.getElementById(`${containerId}_feedback${i}`);
        const comment = document.getElementById(`${containerId}_comment${i}`);
        
        feedback.innerHTML = `✔ Resposta correta: ${q.options[q.answer]}`;
        feedback.className = "feedback correct";
        comment.innerHTML = q.comment;
        comment.classList.add("show");

        // Marcar como corrigida se não estava
        if (!corrected[i]) {
          corrected[i] = true;
        }
      });

      localStorage.setItem(containerId + '_corrected', JSON.stringify(corrected));
      updateResult(containerId, questions);
    }

    function resetQuiz(containerId, resultId) {
      localStorage.removeItem(containerId);
      localStorage.removeItem(containerId + '_corrected');
      
      // Recalcular placar total
      placarTotal = 0;
      ['quiz', 'quiz2', 'quiz3'].forEach(quizId => {
        if (quizId !== containerId) {
          const saved = JSON.parse(localStorage.getItem(quizId)) || {};
          const corrected = JSON.parse(localStorage.getItem(quizId + '_corrected')) || {};
          const questions = quizId === 'quiz' ? questions : quizId === 'quiz2' ? questions2 : questions3;
          
          questions.forEach((q, i) => {
            if (corrected[i] && saved[i] == q.answer) {
              placarTotal++;
            }
          });
        }
      });
      
      localStorage.setItem("placarTotal", placarTotal);
      updateGlobalPlacar();
      
      // Recriar o quiz com os números corretos
      if (containerId === 'quiz') {
        renderQuiz('quiz', questions, 'quiz', 1);
      } else if (containerId === 'quiz2') {
        renderQuiz('quiz2', questions2, 'quiz2', 31);
      } else {
        renderQuiz('quiz3', questions3, 'quiz3', 61);
      }
      document.getElementById(resultId).innerText = "";
    }

    function showPage(pageNum) {
      document.querySelectorAll("div[id^='page']").forEach(div => div.style.display = "none");
      document.getElementById("page" + pageNum).style.display = "block";
    }

// =====================
// BLOCO 1 - SOC / SIEM / MITRE / Incident Response (30 questões)
// =====================
const questions = [
  {
    q: "Durante uma investigação em SIEM, um analista identifica múltiplos eventos de falhas de login RDP seguidos de um acesso bem-sucedido fora do horário comercial. Qual técnica MITRE ATT&CK melhor descreve esse comportamento?",
    options: [
      "T1078 - Uso de Credenciais Válidas",
      "T1021 - Movimento Lateral via SMB",
      "T1059 - Execução de Comandos",
      "T1566 - Phishing"
    ],
    answer: 0,
    comment: "O acesso bem-sucedido após falhas indica uso de credenciais válidas (T1078)."
  },
  {
    q: "Um SOC detecta tráfego de DNS anômalo contendo dados codificados em base64. Qual técnica MITRE ATT&CK está sendo usada?",
    options: [
      "T1071.004 - Exfiltração via DNS",
      "T1562 - Impair Defenses",
      "T1041 - Exfiltração via C2",
      "T1090 - Proxy"
    ],
    answer: 0,
    comment: "DNS tunneling com dados codificados caracteriza exfiltração por DNS."
  },
  {
    q: "Qual métrica mede a velocidade de detecção de uma ameaça pelo SOC?",
    options: [
      "MTTD (Mean Time to Detect)",
      "MTTR (Mean Time to Respond)",
      "MTBF (Mean Time Between Failures)",
      "MTTA (Mean Time to Acknowledge)"
    ],
    answer: 0,
    comment: "MTTD mede o tempo médio para detectar uma ameaça."
  },
  {
    q: "No processo de resposta a incidentes (NIST), qual é a primeira fase?",
    options: [
      "Detecção e Análise",
      "Preparação",
      "Erradicação",
      "Lições Aprendidas"
    ],
    answer: 1,
    comment: "A fase inicial é Preparação."
  },
  {
    q: "Um atacante força logins em um portal web até obter sucesso. Qual técnica MITRE ATT&CK é usada?",
    options: [
      "T1110 - Brute Force",
      "T1003 - Credential Dumping",
      "T1555 - Credential Harvesting",
      "T1204 - User Execution"
    ],
    answer: 0,
    comment: "Múltiplas tentativas de login caracterizam brute force (T1110)."
  },
  {
    q: "Qual é o principal benefício de usar um SOAR integrado ao SIEM?",
    options: [
      "Automação de resposta",
      "Melhor compressão de logs",
      "Aumento do tráfego de rede",
      "Substituir o firewall"
    ],
    answer: 0,
    comment: "SOAR automatiza respostas baseadas em alertas do SIEM."
  },
  {
    q: "Logs de antivírus indicam quarentena de arquivo malicioso. O que o SOC deve fazer?",
    options: [
      "Considerar incidente contido e iniciar análise de impacto",
      "Ignorar o evento",
      "Formatar a máquina",
      "Encerrar a investigação"
    ],
    answer: 0,
    comment: "O incidente deve ser tratado e investigado para impacto."
  },
  {
    q: "Um ataque de phishing direciona usuários para uma página de login falsa. Qual controle ISO 27001 Anexo A está diretamente relacionado?",
    options: [
      "A.9 - Controle de Acesso",
      "A.12 - Operações Seguras",
      "A.16 - Gestão de Incidentes",
      "A.18 - Conformidade"
    ],
    answer: 2,
    comment: "Gestão de Incidentes (A.16) cobre resposta a ataques de phishing."
  },
  {
    q: "Qual ferramenta é mais usada para correlacionar logs em tempo real?",
    options: [
      "Wireshark",
      "Nmap",
      "SIEM",
      "Snort"
    ],
    answer: 2,
    comment: "SIEM é a ferramenta de correlação e análise de logs."
  },
  {
    q: "Um ataque DDoS foi detectado contra o firewall. Qual é a melhor resposta imediata?",
    options: [
      "Ativar mitigação via scrubbing center",
      "Trocar o firewall",
      "Apagar todos os logs",
      "Desabilitar a rede interna"
    ],
    answer: 0,
    comment: "Scrubbing center mitiga tráfego DDoS em larga escala."
  },
  {
    q: "O que é 'Threat Hunting'?",
    options: [
      "Busca proativa por ameaças não detectadas",
      "Escaneamento de portas TCP",
      "Auditoria de conformidade ISO",
      "Implementação de antivírus"
    ],
    answer: 0,
    comment: "Threat Hunting é busca ativa por ameaças ocultas."
  },
  {
    q: "Qual técnica MITRE ATT&CK descreve persistência via chave de registro no Windows?",
    options: [
      "T1547 - Boot or Logon Autostart Execution",
      "T1071 - Application Layer Protocol",
      "T1560 - Archive Collected Data",
      "T1059 - Command Execution"
    ],
    answer: 0,
    comment: "Persistência no registro é T1547."
  },
  {
    q: "Qual função do SIEM facilita a detecção de ameaças APT?",
    options: [
      "Correlações de eventos",
      "Gerenciamento de patches",
      "Controle de senhas",
      "Criação de VLANs"
    ],
    answer: 0,
    comment: "Correlações de eventos cruzam logs para detectar padrões APT."
  },
  {
    q: "Qual métrica mede o tempo para restaurar sistemas após um incidente?",
    options: [
      "MTTR",
      "MTTD",
      "MTBF",
      "RPO"
    ],
    answer: 0,
    comment: "MTTR = Mean Time to Recover/Respond."
  },
  {
    q: "Qual etapa do NIST trata de recuperação após um ataque?",
    options: [
      "Recovery",
      "Preparation",
      "Detection",
      "Containment"
    ],
    answer: 0,
    comment: "Recovery restaura operações normais."
  },
  {
    q: "Qual componente coleta logs antes de enviá-los ao SIEM central?",
    options: [
      "Agente",
      "Firewall",
      "IPS",
      "Switch"
    ],
    answer: 0,
    comment: "Agentes coletam e enviam logs."
  },
  {
    q: "O que caracteriza um 'False Positive' em SIEM?",
    options: [
      "Alerta legítimo de ameaça",
      "Evento benigno identificado como ameaça",
      "Ataque real sem alerta",
      "Erro de configuração de rede"
    ],
    answer: 1,
    comment: "False Positive = evento normal tratado como ameaça."
  },
  {
    q: "Qual técnica de exfiltração usa HTTPS para ocultar tráfego?",
    options: [
      "T1071 - Application Layer Protocol",
      "T1041 - Exfiltration Over C2 Channel",
      "T1567 - Exfiltration Over Web Service",
      "T1003 - Credential Dumping"
    ],
    answer: 0,
    comment: "HTTPS pode ser usado para exfiltração disfarçada."
  },
  {
    q: "Qual métrica mede o tempo entre a falha e a próxima falha?",
    options: [
      "MTBF",
      "MTTD",
      "MTTR",
      "MTTA"
    ],
    answer: 0,
    comment: "MTBF = Mean Time Between Failures."
  },
  {
    q: "O que significa CTI no contexto de SOC?",
    options: [
      "Cyber Threat Intelligence",
      "Central Time Integration",
      "Critical Technical Indicator",
      "Computer Telemetry Input"
    ],
    answer: 0,
    comment: "CTI = Inteligência de Ameaças Cibernéticas."
  },
  {
    q: "Qual padrão MITRE ATT&CK cobre movimento lateral por SMB?",
    options: [
      "T1021.002",
      "T1110",
      "T1548",
      "T1204"
    ],
    answer: 0,
    comment: "T1021.002 cobre SMB lateral movement."
  },
  {
    q: "Um adversário implanta malware em inicialização UEFI. Isso caracteriza:",
    options: [
      "Persistência avançada",
      "Evasão de firewall",
      "Exfiltração de DNS",
      "Sniffing de rede"
    ],
    answer: 0,
    comment: "Malware no boot = persistência avançada."
  },
  {
    q: "Qual é o objetivo principal de um 'Playbook de Incidente' em SOAR?",
    options: [
      "Automatizar resposta",
      "Gerar logs",
      "Armazenar patches",
      "Criar VLANs"
    ],
    answer: 0,
    comment: "Playbook SOAR = resposta automatizada."
  },
  {
    q: "Qual protocolo é frequentemente usado para comunicação C2 em APTs?",
    options: [
      "HTTPS",
      "IMAP",
      "ICMP",
      "RDP"
    ],
    answer: 0,
    comment: "HTTPS é usado por APTs para se misturar a tráfego legítimo."
  },
  {
    q: "Qual técnica MITRE ATT&CK está associada ao uso de PowerShell para execução maliciosa?",
    options: [
      "T1059.001",
      "T1021",
      "T1547",
      "T1566"
    ],
    answer: 0,
    comment: "T1059.001 cobre execução via PowerShell."
  },
  {
    q: "Um ataque via macros em documentos do Office é classificado como:",
    options: [
      "T1204 - User Execution",
      "T1003 - Credential Dumping",
      "T1041 - Exfiltração",
      "T1560 - Arquivamento de dados"
    ],
    answer: 0,
    comment: "Macros maliciosas são execução pelo usuário."
  },
  {
    q: "Qual técnica MITRE cobre abuso de contas privilegiadas?",
    options: [
      "T1078",
      "T1003",
      "T1567",
      "T1021"
    ],
    answer: 0,
    comment: "T1078 cobre uso de credenciais válidas."
  },
  {
    q: "O que mede MTTA?",
    options: [
      "Tempo para reconhecer um alerta",
      "Tempo para detectar uma ameaça",
      "Tempo para restaurar sistemas",
      "Tempo entre falhas"
    ],
    answer: 0,
    comment: "MTTA = Mean Time to Acknowledge."
  },
  {
    q: "Qual modelo é usado como referência para mapeamento de técnicas adversárias?",
    options: [
      "MITRE ATT&CK",
      "ISO 27001",
      "COBIT",
      "NIST CSF"
    ],
    answer: 0,
    comment: "MITRE ATT&CK mapeia técnicas adversárias."
  }
];


// =====================
// BLOCO 2 - Redes / Linux / Protocolos / Vulnerabilidades (30 questões)
// =====================
const questions2 = [
  {
    q: "Qual comando Linux permite monitorar tentativas de login em tempo real?",
    options: [
      "tail -f /var/log/auth.log",
      "systemctl restart ssh",
      "chmod 777 /etc/shadow",
      "cat /etc/passwd"
    ],
    answer: 0,
    comment: "O arquivo /var/log/auth.log registra autenticações."
  },
  {
    q: "Qual protocolo utiliza a porta 3389/TCP?",
    options: [
      "SSH",
      "RDP",
      "Telnet",
      "LDAP"
    ],
    answer: 1,
    comment: "RDP usa a porta 3389/TCP."
  },
  {
    q: "Um atacante explora SQL Injection. Qual mitigação é mais eficaz?",
    options: [
      "Uso de parâmetros preparados (prepared statements)",
      "Desabilitar logs do banco",
      "Criptografar tráfego HTTPS",
      "Trocar a porta padrão do SQL"
    ],
    answer: 0,
    comment: "Prepared statements previnem SQL Injection."
  },
  {
    q: "Qual protocolo deve ser usado em vez de FTP para transferência segura?",
    options: [
      "SFTP",
      "SMTP",
      "SNMP",
      "TFTP"
    ],
    answer: 0,
    comment: "SFTP oferece transferência criptografada."
  },
  {
    q: "Um sysadmin detecta que o serviço Apache no Linux está rodando como root. Qual risco existe?",
    options: [
      "Escalada de privilégios",
      "Baixo consumo de memória",
      "Aumento de latência",
      "Logs duplicados"
    ],
    answer: 0,
    comment: "Executar serviços como root aumenta risco de exploração."
  },
  {
    q: "Qual comando Linux lista conexões de rede ativas?",
    options: [
      "netstat -tulnp",
      "ps -ef",
      "ls -la",
      "df -h"
    ],
    answer: 0,
    comment: "netstat exibe conexões de rede."
  },
  {
    q: "Qual protocolo é usado para sincronização de tempo em redes?",
    options: [
      "NTP",
      "SNMP",
      "IMAP",
      "SMB"
    ],
    answer: 0,
    comment: "NTP sincroniza o relógio entre dispositivos."
  },
  {
    q: "Qual vulnerabilidade é explorada quando dados são enviados sem sanitização para o navegador?",
    options: [
      "XSS (Cross-Site Scripting)",
      "SQL Injection",
      "CSRF",
      "Buffer Overflow"
    ],
    answer: 0,
    comment: "XSS ocorre quando dados não são sanitizados antes de exibição."
  },
  {
    q: "Em IPv6, qual protocolo substitui o ARP?",
    options: [
      "NDP (Neighbor Discovery Protocol)",
      "RIPng",
      "OSPFv3",
      "EIGRP"
    ],
    answer: 0,
    comment: "IPv6 usa NDP em vez de ARP."
  },
  {
    q: "Um atacante explora Heartbleed. Qual protocolo está envolvido?",
    options: [
      "TLS/SSL",
      "SSH",
      "IPSec",
      "RDP"
    ],
    answer: 0,
    comment: "Heartbleed afetava o OpenSSL (TLS/SSL)."
  },
  {
    q: "Qual comando exibe permissões de arquivos no Linux?",
    options: [
      "ls -l",
      "chmod",
      "ps aux",
      "whoami"
    ],
    answer: 0,
    comment: "ls -l mostra permissões de arquivos."
  },
  {
    q: "Qual porta padrão o HTTPS utiliza?",
    options: [
      "443",
      "80",
      "21",
      "22"
    ],
    answer: 0,
    comment: "HTTPS usa a porta 443."
  },
  {
    q: "Qual vulnerabilidade explora falha em buffer de memória?",
    options: [
      "Buffer Overflow",
      "SQL Injection",
      "XSS",
      "CSRF"
    ],
    answer: 0,
    comment: "Buffer Overflow ocorre quando a memória é corrompida."
  },
  {
    q: "Qual ferramenta é usada para varredura de portas?",
    options: [
      "Nmap",
      "Snort",
      "Wireshark",
      "Burp Suite"
    ],
    answer: 0,
    comment: "Nmap faz varredura de portas."
  },
  {
    q: "Qual comando altera permissões de arquivo no Linux?",
    options: [
      "chmod",
      "ls",
      "pwd",
      "cat"
    ],
    answer: 0,
    comment: "chmod altera permissões."
  },
  {
    q: "Qual técnica de ataque envolve falsificação de requisições autenticadas?",
    options: [
      "CSRF",
      "XSS",
      "SQL Injection",
      "Sniffing"
    ],
    answer: 0,
    comment: "CSRF = Cross-Site Request Forgery."
  },
  {
    q: "Qual protocolo é usado para envio de e-mails?",
    options: [
      "SMTP",
      "IMAP",
      "POP3",
      "SNMP"
    ],
    answer: 0,
    comment: "SMTP envia e-mails."
  },
  {
    q: "Qual comando exibe interfaces de rede no Linux?",
    options: [
      "ifconfig",
      "lsusb",
      "mount",
      "uptime"
    ],
    answer: 0,
    comment: "ifconfig exibe interfaces de rede."
  },
  {
    q: "Qual vulnerabilidade é explorada em 'clickjacking'?",
    options: [
      "Enganar o usuário para clicar em elementos invisíveis",
      "Executar código remoto",
      "Forçar upload de arquivo",
      "Injetar SQL"
    ],
    answer: 0,
    comment: "Clickjacking engana usuários com camadas ocultas."
  },
  {
    q: "Qual porta o DNS utiliza?",
    options: [
      "53",
      "80",
      "25",
      "110"
    ],
    answer: 0,
    comment: "DNS usa porta 53."
  },
  {
    q: "Qual comando exibe uso de disco no Linux?",
    options: [
      "df -h",
      "du -sh",
      "lsblk",
      "free -m"
    ],
    answer: 0,
    comment: "df -h mostra espaço em disco."
  },
  {
    q: "Qual protocolo é usado em VPNs para tunelamento seguro?",
    options: [
      "IPSec",
      "SMTP",
      "FTP",
      "POP3"
    ],
    answer: 0,
    comment: "IPSec é usado em VPNs."
  },
  {
    q: "Qual vulnerabilidade é explorada por injeção de comandos no SO?",
    options: [
      "Command Injection",
      "XSS",
      "CSRF",
      "Buffer Overflow"
    ],
    answer: 0,
    comment: "Command Injection explora execução no SO."
  },
  {
    q: "Qual protocolo é usado pelo SNMP?",
    options: [
      "UDP 161",
      "TCP 21",
      "UDP 67",
      "TCP 443"
    ],
    answer: 0,
    comment: "SNMP usa UDP porta 161."
  },
  {
    q: "Qual ferramenta captura pacotes de rede para análise?",
    options: [
      "Wireshark",
      "Nmap",
      "Burp Suite",
      "Metasploit"
    ],
    answer: 0,
    comment: "Wireshark captura pacotes."
  },
  {
    q: "Qual comando encerra um processo no Linux?",
    options: [
      "kill -9 PID",
      "ls -la",
      "chmod 755",
      "tail -f"
    ],
    answer: 0,
    comment: "kill -9 encerra processos."
  },
  {
    q: "Qual vulnerabilidade foi explorada pelo ransomware WannaCry?",
    options: [
      "EternalBlue (SMBv1)",
      "SQL Injection",
      "Heartbleed",
      "XSS"
    ],
    answer: 0,
    comment: "WannaCry explorava EternalBlue no SMBv1."
  },
  {
    q: "Qual protocolo autentica usuários no Active Directory?",
    options: [
      "Kerberos",
      "LDAP",
      "RADIUS",
      "TACACS+"
    ],
    answer: 0,
    comment: "AD usa Kerberos como protocolo principal."
  },
  {
    q: "Qual comando exibe processos em execução no Linux?",
    options: [
      "ps aux",
      "ls",
      "uptime",
      "who"
    ],
    answer: 0,
    comment: "ps aux lista processos ativos."
  }
];


// =====================
// BLOCO 3 - Compliance / ISO / LGPD / COBIT / Governança (20 questões)
// =====================
const questions3 = [
  {
    q: "Qual é o principal objetivo da ISO 27001?",
    options: [
      "Implementar controles técnicos específicos",
      "Estabelecer um Sistema de Gestão de Segurança da Informação",
      "Criar políticas de backup",
      "Auditar logs de rede"
    ],
    answer: 1,
    comment: "ISO 27001 define requisitos para um SGSI."
  },
  {
    q: "Qual legislação brasileira trata de proteção de dados pessoais?",
    options: [
      "LGPD",
      "Marco Civil da Internet",
      "Lei Carolina Dieckmann",
      "Código Penal"
    ],
    answer: 0,
    comment: "LGPD é a Lei Geral de Proteção de Dados."
  },
  {
    q: "Na LGPD, quem é o 'Encarregado'?",
    options: [
      "Responsável por TI",
      "Pessoa que atua como DPO (Data Protection Officer)",
      "Auditor interno",
      "Gerente de rede"
    ],
    answer: 1,
    comment: "O Encarregado é o DPO no contexto da LGPD."
  },
  {
    q: "Qual framework foca em governança de TI?",
    options: [
      "COBIT",
      "ISO 27001",
      "NIST CSF",
      "GDPR"
    ],
    answer: 0,
    comment: "COBIT é voltado para governança de TI."
  },
  {
    q: "Qual princípio da LGPD garante que os dados coletados sejam apenas os necessários?",
    options: [
      "Necessidade",
      "Finalidade",
      "Adequação",
      "Transparência"
    ],
    answer: 0,
    comment: "Necessidade limita a coleta ao mínimo essencial."
  },
  {
    q: "Na ISO 27001, o Anexo A traz:",
    options: [
      "Controles de segurança",
      "Exemplos de políticas",
      "Templates de logs",
      "Scripts de auditoria"
    ],
    answer: 0,
    comment: "O Anexo A lista 114 controles de segurança."
  },
  {
    q: "Qual princípio de governança do COBIT foca em gerar valor para os stakeholders?",
    options: [
      "Entrega de Valor",
      "Segurança",
      "Conformidade",
      "Eficiência Operacional"
    ],
    answer: 0,
    comment: "Entrega de Valor é central no COBIT."
  },
  {
    q: "Qual regulamento europeu é equivalente à LGPD?",
    options: [
      "GDPR",
      "HIPAA",
      "SOX",
      "PCI-DSS"
    ],
    answer: 0,
    comment: "GDPR é a versão europeia da LGPD."
  },
  {
    q: "Qual norma ISO é referência para continuidade de negócios?",
    options: [
      "ISO 22301",
      "ISO 27001",
      "ISO 9001",
      "ISO 20000"
    ],
    answer: 0,
    comment: "ISO 22301 cobre continuidade de negócios."
  },
  {
    q: "Qual documento formaliza a base legal de tratamento de dados na LGPD?",
    options: [
      "Política de Privacidade",
      "Relatório de Impacto",
      "Contrato ou Consentimento",
      "Backup Criptografado"
    ],
    answer: 2,
    comment: "Contrato ou consentimento dá base legal ao tratamento."
  },
  {
    q: "Na ISO 27001, a cláusula 9 refere-se a:",
    options: [
      "Avaliação de Desempenho",
      "Contexto da Organização",
      "Liderança",
      "Planejamento"
    ],
    answer: 0,
    comment: "Cláusula 9 = Avaliação de Desempenho."
  },
  {
    q: "Qual órgão brasileiro fiscaliza a LGPD?",
    options: [
      "ANPD",
      "CGU",
      "STF",
      "BACEN"
    ],
    answer: 0,
    comment: "ANPD é a Autoridade Nacional de Proteção de Dados."
  },
  {
    q: "Qual framework divide segurança em Identify, Protect, Detect, Respond, Recover?",
    options: [
      "NIST Cybersecurity Framework",
      "ISO 27001",
      "COBIT",
      "GDPR"
    ],
    answer: 0,
    comment: "NIST CSF é baseado nessas 5 funções."
  },
  {
    q: "Na LGPD, qual princípio exige clareza ao titular sobre o uso dos dados?",
    options: [
      "Transparência",
      "Segurança",
      "Finalidade",
      "Necessidade"
    ],
    answer: 0,
    comment: "Transparência exige clareza no uso de dados."
  },
  {
    q: "Na ISO 27001, qual cláusula trata do suporte (recursos, competência, conscientização)?",
    options: [
      "Cláusula 7",
      "Cláusula 5",
      "Cláusula 9",
      "Cláusula 4"
    ],
    answer: 0,
    comment: "Cláusula 7 = Suporte."
  },
  {
    q: "Qual framework define controles de pagamento com cartão?",
    options: [
      "PCI-DSS",
      "SOX",
      "HIPAA",
      "GDPR"
    ],
    answer: 0,
    comment: "PCI-DSS regula segurança em cartões."
  },
  {
    q: "Qual princípio da LGPD garante compatibilidade entre finalidade e uso dos dados?",
    options: [
      "Adequação",
      "Necessidade",
      "Segurança",
      "Transparência"
    ],
    answer: 0,
    comment: "Adequação assegura alinhamento da coleta ao uso."
  },
  {
    q: "No COBIT, qual é o objetivo do domínio APO?",
    options: [
      "Alinhar, Planejar e Organizar",
      "Executar e Suportar",
      "Monitorar e Avaliar",
      "Responder a Incidentes"
    ],
    answer: 0,
    comment: "APO = Align, Plan and Organize."
  },
  {
    q: "Qual documento da LGPD pode ser solicitado pela ANPD para avaliar riscos?",
    options: [
      "Relatório de Impacto à Proteção de Dados",
      "Política de Backup",
      "Plano de Continuidade",
      "Ata de Reunião"
    ],
    answer: 0,
    comment: "Relatório de Impacto é previsto na LGPD."
  },
  {
    q: "Na ISO 27001, qual cláusula trata da melhoria contínua?",
    options: [
      "Cláusula 10",
      "Cláusula 5",
      "Cláusula 6",
      "Cláusula 4"
    ],
    answer: 0,
    comment: "Cláusula 10 aborda melhoria contínua."
  }
];


    // Inicializa os quizzes com numeração correta
    renderQuiz("quiz", questions, "quiz", 1);
    renderQuiz("quiz2", questions2, "quiz2", 31);
    renderQuiz("quiz3", questions3, "quiz3", 61);
    updateGlobalPlacar();

    // Inicializar resultados
    document.addEventListener('DOMContentLoaded', function() {
      updateResult('quiz', questions);
      updateResult('quiz2', questions2);
      updateResult('quiz3', questions3);
    });
  </script>
</body>
</html>
